---
title: "[Item-49] 매개변수가 유효한지 검사하라"
date: 2025-11-10
categories: [Book, Effective Java 3/E]
tags: [Effective Java 3/E]
toc: true
math: true
image: /assets/posts/2025-11/Item-49%20매개변수가%20유효한지%20검사하라/thumbnail.jpg
---

## Intro

메서드와 생성자 대부분은 입력 매개변수의 값이 특정 조건을 만족하기를 바란다. 예컨대 인덱스 값은 음수이면 안 되며, 객체 참조는 `null`이 아니어야 하는 식이다. 이런 제약은 반드시 문서화해야 하며 메서드 몸체가 시작되기 전에 검사해야 한다. 이는 "오류는 가능한 한 빨리 (발생한 곳에서) 잡아야 한다"는 일반 원칙의 한 사례이기도 하다. 오류를 발생한 곳에서 즉시 잡지 못하면 해당 오류를 감지하기 어려워지고, 감지하더라도 오류의 발생 지점을 찾기 어려워진다.

---

## 매개변수 유효성 검사

메서드 몸체가 실행되기 전에 매개변수를 확인한다면 잘못된 값이 넘어왔을 때 즉각적이고 깔끔한 방식으로 예외를 던질 수 있다.

1. 메서드가 수행되는 중간에 모호한 예외를 던지며 실패할 수 있다.
2. 더 나쁜 상황은 메서드가 잘 수행되었지만 잘못된 결과를 반환할 때다.
3. 더더 나쁜 상황은 메서드가 잘 수행되었지만 어떤 객체를 이상한 상태로 만들어놓아서 미래의 알 수 없는 시점에 이 메서드와는 관련 없는 오류를 낼 때다.

공개 API인 `public`과 `protected` 메서드는 매개변수 값이 잘못됐을 때 던지는 예외를 문서화해야 한다.

아래는 `List`의 `get` 메서드로 `get` 메서드는 리스트에서 해당 인덱스의 원소를 반환하는 메서드다. 인덱스는 정숫값이므로 `int`형 파라미터를 받게 메서드를 구현할 경우 음수 인덱스를 요청하거나 리스트의 크기를 넘어서는 인덱스가 요청으로 들어올 수 있는데 이에 대한 예외를 명시하고 있다.

![](/assets/posts/2025-11/Item-49%20매개변수가%20유효한지%20검사하라/assets/photo1.png)

아래는 `BigInteger`의 `mod` 메서드로 `BigInteger` 타입 파라미터를 받아서 나머지를 반환하는 메서드다. 이때의 나머지는 항상 0 이상 m 미만을 반환하는데 이를 위해 음수가 파라미터로 들어올 경우에 대한 예외를 명시하고 있다.(`remainder` 메서드와는 다르다.)

![](/assets/posts/2025-11/Item-49%20매개변수가%20유효한지%20검사하라/assets/photo2.png)

---

## assert 단언문

`assert` 예약어를 사용하여 매개변수의 유효성 검사를 해볼 수도 있다. `assert`는 기본적으로 런터임에 아무런 효과도 성능저하도 없으며 활성화를 해줘야 런타임에 영향을 준다. `assert`는 실패하면 `AssertionError`를 던진다.

아래와 같이 코드를 작성하고,

```java
public class AssertMain {
    public static void main(String[] args) {
        int x = -1;

        assert x >= 0;

        System.out.println("x = " + x);
    }
}
```

클래스 파일을 실행하면 아래와 같이 아무런 동작을 하지 않는다.

```bash
 java AssertMain
x = -1
```

여기서 `-ea` 옵션을 줄 경우 아래와 같이 예외가 발생하는 걸 볼 수 있다.

```bash
 java -ea AssertMain
Exception in thread "main" java.lang.AssertionError
	at AssertMain.main(AssertMain.java:5)
```

`assert` 단언문의 경우 활성화 시 검사 비용이 있어서 운영 환경에서는 꺼두고 개발 환경에서 사용하는 것이 좋다고 한다.(근데 다른 테스트 도구들도 있어서 굳이 싶긴 하다.)

---

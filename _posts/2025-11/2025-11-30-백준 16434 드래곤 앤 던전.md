---
title: "[백준] 16434번 - 드래곤 앤 던전 [Java]"
date: 2025-11-30
categories: [PS, BaekJoon]
tags: [구현, 이분 탐색, 매개 변수 탐색]
toc: true
math: true
---

[문제 링크](https://www.acmicpc.net/problem/16434)

![](/assets/posts/2025-11/백준%2016434%20드래곤%20앤%20던전/photo1.png)
![](/assets/posts/2025-11/백준%2016434%20드래곤%20앤%20던전/photo2.png)

---

## 문제 풀이

모든 몬스터를 쓰러트리기 위한 용사의 최대 생명력을 찾아야하는 문제로 매개 변수 탐색을 활용하면 간단하게 해결할 수 있다. 주어진 던전 정보를 통해 필요한 체력을 계산하는 것이 아니라 체력의 하한과 상한을 정하고 그 중간값으로 던전을 돌아보고 안되면 체력을 증가시키고 되면 체력을 감소시켜가며 던전을 돌 수 있는 최소 체력을 찾는 방식으로 해결했다.

---

## 코드

공격력도 포션을 반복적으로 먹는 과정에서 오버플로우가 날 수 있음에 주의해야 하며 몬스터와의 전투를 반목문으로 구현할 경우 시간초과가 발생한다. 따라서 미리 몬스터와 용사가 각각 몇 번의 공격으로 서로를 물리칠 수 있는지 계산해서 몬스터의 공격 횟수가 더 많을 경우 용사가 이기는 전투로 판단했다. 이때 몬스터의 공격 횟수는 용사의 공격 횟수 -1 이다.

### 1. 이분 탐색 + 매개 변수 탐색 [Java]

```java
import java.io.*;
import java.util.*;

public class Main {

    private static class Hero {
        long hMax;
        long hCur;
        long hAtk;  // 포션을 먹는 과정에서 공격력도 오버플로우 주의

        public Hero(long hMax, int hAtk) {
            this.hMax = hMax;
            this.hCur = hMax;
            this.hAtk = hAtk;
        }

        private void drink(int atk, int hp) {
            hAtk += atk;
            hCur = Math.min(hCur + hp, hMax);
        }
    }

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringTokenizer st = new StringTokenizer(br.readLine());

        int N = Integer.parseInt(st.nextToken());
        int hAtk = Integer.parseInt(st.nextToken());

        int[][] map = new int[N][3];
        for (int i = 0; i < N; i++) {
            st = new StringTokenizer(br.readLine());
            map[i][0] = Integer.parseInt(st.nextToken());
            map[i][1] = Integer.parseInt(st.nextToken());
            map[i][2] = Integer.parseInt(st.nextToken());
        }

        System.out.println(lowerBound(map, hAtk));
    }

    private static long lowerBound(int[][] map, int hAtk) {
        long left = 1;
        long right = Long.MAX_VALUE - 1;

        while (left < right) {
            long mid = left + (right - left) / 2;

            boolean result = simul(map, new Hero(mid, hAtk));

            if (!result) {
                left = mid + 1;
            } else {
                right = mid;
            }
        }

        return right;
    }

    private static boolean simul(int[][] map, Hero hero) {
        for (int[] stage : map) {
            int t = stage[0];
            int a = stage[1];
            int h = stage[2];

            if (t == 1) {
                long heroAtkCnt = (h + hero.hAtk - 1) / hero.hAtk;
                long monsAtkCnt = (hero.hCur + a - 1) / a;

                if (heroAtkCnt <= monsAtkCnt) {
                    hero.hCur -= a * (heroAtkCnt - 1);
                } else {
                    return false;
                }
            } else {
                hero.drink(a, h);
            }
        }

        return true;
    }
}
```

---

## 풀이 정보

### 1. 이분 탐색 + 매개 변수 탐색 [Java]

- 52 min

![](/assets/posts/2025-11/백준%2016434%20드래곤%20앤%20던전/photo3.png)

---

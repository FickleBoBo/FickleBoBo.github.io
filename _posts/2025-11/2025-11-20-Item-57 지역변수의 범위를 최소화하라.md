---
title: "[Item-57] 지역변수의 범위를 최소화하라"
date: 2025-11-20
categories: [Book, Effective Java 3/E]
tags: [Effective Java 3/E]
toc: true
math: true
image: /assets/posts/2025-11/Item-57%20지역변수의%20범위를%20최소화하라/thumbnail.jpg
---

## Intro

이번 아이템은 기본적으로 "클래스와 멤버의 접근 권한을 최소화하라"고 한 아이템 15와 취지가 비슷하다. 지역변수의 유효 범위를 최소로 줄이면 코드 가독성과 유지보수성이 높아지고 오류 가능성은 낮아진다.  
C와 같이 역사가 깊은 프로그래밍 언어 중에는 지역변수를 코드 블록의 첫머리에 선언하는 경우가 많고, 이 방식을 여전히 습관처럼 따르는 프로그래머도 있다. 하지만 Java에서는 문장을 선언할 수 있는 곳이면 어디서든 변수를 선언할 수 있다.(C 언어도 C99 표준부터는 이렇게 바뀌었다.)

---

## 지역변수의 범위가 넓을 경우 단점

- 사용하기까지 한참 남은 상황으로 인해 코드가 어수선해져 가독성이 떨어진다.
- 변수를 실제로 사용하는 시점엔 타입과 초깃값이 기억나지 않을 수 있다.
- 지역변수를 사용한 후에도 지역변수가 살아 있게 되기 쉽다.

---

## while 문 vs for 문

while 문과 for 문은 모두 반복문이라는 공통점이 있지만 while 문은 반복 변수(loop variable)의 범위가 반복문 외부, for 문은 반복 변수의 범위가 반복문 내부라는 차이점이 있다.(향상된 for 문도 마찬가지다.) 따라서 while 문의 반복 변수는 반복문이 종료된 뒤에도 남아서 영향을 미칠 수 있고, 이 때문에 반복 변수의 값을 반복문이 종료된 뒤에도 써야 하는 상황이 아니라면 while 문보다는 for 문을 쓰는 편이 낫다.

아래는 삽입 정렬에 대한 코드로 삽입 위치를 찾는데 활용하는 `j`의 값이 반복문 종료 후에도 필요하므로 while 문을 활용했다.

```java
public static void insertionSort(int[] arr) {
    int N = arr.length;

    for (int i = 1; i < N; i++) {  // N-1개만 정렬하면 됨
        int key = arr[i];  // 삽입할 원소 복사
        int j = i - 1;

        // 삽입할 원소보다 더 큰 원소들은 뒤로 한칸씩 이동
        while (j >= 0 && arr[j] > key) {
            arr[j + 1] = arr[j];
            j--;
        }

        arr[j + 1] = key;  // 삽입
    }
}
```

---

## try-finally 문 vs try-with-resources 문

아이템 9의 try-with-resources문은 지역 변수의 범위를 최소화할 수 있는 좋은 예시였다. try-finally 문의 경우 자원 반납을 위해 `close`를 호출해야하기 때문에 블록 외부에 지역변수를 선언해야했다.

---
